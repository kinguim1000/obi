// prenode.js
// stub to include printf and scanf in javascript programs

var scanf_stub = require('../scanf-obi').scanf,
    printf_stub = require('../scanf-obi').sprintf,
    fgets_stub = require('../scanf-obi').fgets

function scanf(format) {
    // scanf_stub returns an expression with variables passed and values read from stdin
    var res = scanf_stub.apply(this, Array.prototype.slice.call(arguments, 0));
    eval(res);
}

function printf(args){
    // printf_stub returns the formatted string to be output
    var res = printf_stub.apply(this, Array.prototype.slice.call(arguments, 0));
    process.stdout.write(res);
}

function fgets(args){
    // fgets_stub returns an expression with the variable and value read from stdin
    var res = fgets_stub.apply(this, Array.prototype.slice.call(arguments, 0));
    eval(res);
}

// end of stub

var xxx=-1;
var yyy=-1;
var s;
var line;

scanf("%d", "xxx");
console.log('xxx = ', xxx);
console.log('---\n');

scanf("%d %s", "yyy", "s");
console.log('yyy = ', yyy);
console.log('s = ', s);
console.log('---\n');


printf('A test string\n');
printf('%d %.2f %s\n', 10, 10/3, s);

fgets("line");
//scanf("%s","line");
printf("read line = %s\n", line);

scanf("%d %d %s", "xxx", "yyy", "s");
console.log('yyy = ', yyy);
console.log('s = ', s);
console.log('---\n');
